var app=angular.module("admin",["ngRoute","ngAnimate","ngMessages","ui.bootstrap","angular-loading-bar","http-auth-interceptor","gettext","tmh.dynamicLocale","colorpicker.module","ngSanitize"]);app.config(["$httpProvider","$routeProvider","$locationProvider","$provide","cfpLoadingBarProvider","tmhDynamicLocaleProvider","$sceDelegateProvider",function(e,a,t,l,s,r,p){e.defaults.useXDomain=!0,delete e.defaults.headers.post["Content-Type"],s.latencyThreshold=300,s.includeSpinner=!1,r.localeLocationPattern("https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.4.8/angular-locale_{{locale}}.js"),a.when("/",{templateUrl:"/app/pages/getting_started/index.html",reloadOnSearch:!1}),a.when("/products",{templateUrl:"/app/pages/products/list.html",reloadOnSearch:!1}),a.when("/products/add",{templateUrl:"/app/pages/products/set.html",reloadOnSearch:!0}),a.when("/products/:id/edit",{templateUrl:"/app/pages/products/set.html",reloadOnSearch:!0}),a.when("/gateways",{templateUrl:"/app/pages/gateways/list.html",reloadOnSearch:!1}),a.when("/gateways/add",{templateUrl:"/app/pages/gateways/set.html",reloadOnSearch:!0}),a.when("/gateways/:id/edit",{templateUrl:"/app/pages/gateways/set.html",reloadOnSearch:!0}),a.when("/templates",{templateUrl:"/app/pages/templates/list.html",reloadOnSearch:!1}),a.when("/templates/add",{templateUrl:"/app/pages/templates/set.html",reloadOnSearch:!0}),a.when("/templates/:id/edit",{templateUrl:"/app/pages/templates/set.html",reloadOnSearch:!0}),a.when("/subscription_plans",{templateUrl:"/app/pages/subscription_plans/list.html",reloadOnSearch:!1}),a.when("/subscription_plans/add",{templateUrl:"/app/pages/subscription_plans/set.html",reloadOnSearch:!0}),a.when("/subscription_plans/:id/edit",{templateUrl:"/app/pages/subscription_plans/set.html",reloadOnSearch:!0}),a.when("/license_services",{templateUrl:"/app/pages/license_services/list.html",reloadOnSearch:!1}),a.when("/license_services/add",{templateUrl:"/app/pages/license_services/set.html",reloadOnSearch:!0}),a.when("/license_services/:id/edit",{templateUrl:"/app/pages/license_services/set.html",reloadOnSearch:!0}),a.when("/images",{templateUrl:"/app/pages/images/list.html",reloadOnSearch:!1}),a.when("/images/add",{templateUrl:"/app/pages/images/add.html",reloadOnSearch:!0}),a.when("/images/:id",{templateUrl:"/app/pages/images/view.html",reloadOnSearch:!0}),a.when("/files",{templateUrl:"/app/pages/files/list.html",reloadOnSearch:!1}),a.when("/files/add",{templateUrl:"/app/pages/files/add.html",reloadOnSearch:!0}),a.when("/files/:id/edit",{templateUrl:"/app/pages/files/edit.html",reloadOnSearch:!0}),a.when("/orders",{templateUrl:"/app/pages/orders/list.html",reloadOnSearch:!1}),a.when("/orders/:id",{templateUrl:"/app/pages/orders/view.html",reloadOnSearch:!1}),a.when("/payments",{templateUrl:"/app/pages/payments/list.html",reloadOnSearch:!1}),a.when("/payments/:id",{templateUrl:"/app/pages/payments/view.html",reloadOnSearch:!0}),a.when("/refunds",{templateUrl:"/app/pages/refunds/list.html",reloadOnSearch:!1}),a.when("/refunds/:id",{templateUrl:"/app/pages/refunds/view.html",reloadOnSearch:!0}),a.when("/subscriptions",{templateUrl:"/app/pages/subscriptions/list.html",reloadOnSearch:!1}),a.when("/subscriptions/:id",{templateUrl:"/app/pages/subscriptions/view.html",reloadOnSearch:!0}),a.when("/apps",{templateUrl:"/app/pages/apps/list.html",reloadOnSearch:!1}),a.when("/apps/add",{templateUrl:"/app/pages/apps/set.html",reloadOnSearch:!0}),a.when("/apps/:id/edit",{templateUrl:"/app/pages/apps/set.html",reloadOnSearch:!0}),a.when("/app_installations",{templateUrl:"/app/pages/app_installations/list.html",reloadOnSearch:!1}),a.when("/app_installations/:id",{templateUrl:"/app/pages/app_installations/view.html",reloadOnSearch:!0}),a.when("/app_installations/:id/settings",{templateUrl:"/app/pages/app_installations/settings.html",reloadOnSearch:!0}),a.when("/app_installations/:id/style",{templateUrl:"/app/pages/app_installations/style.html",reloadOnSearch:!0}),a.when("/carts",{templateUrl:"/app/pages/carts/list.html",reloadOnSearch:!1}),a.when("/carts/:id",{templateUrl:"/app/pages/carts/view.html",reloadOnSearch:!0}),a.when("/invoices",{templateUrl:"/app/pages/invoices/list.html",reloadOnSearch:!1}),a.when("/invoices/add",{templateUrl:"/app/pages/invoices/set.html",reloadOnSearch:!0}),a.when("/invoices/:id",{templateUrl:"/app/pages/invoices/set.html",reloadOnSearch:!0}),a.when("/customers",{templateUrl:"/app/pages/customers/list.html",reloadOnSearch:!1}),a.when("/customers/:id",{templateUrl:"/app/pages/customers/view.html",reloadOnSearch:!0}),a.when("/auths",{templateUrl:"/app/pages/auths/list.html",reloadOnSearch:!1}),a.when("/auths/add",{templateUrl:"/app/pages/auths/set.html",reloadOnSearch:!0}),a.when("/auths/:id/edit",{templateUrl:"/app/pages/auths/set.html",reloadOnSearch:!0}),a.when("/account/edit",{templateUrl:"/app/pages/accounts/update.html",reloadOnSearch:!0}),a.when("/profile",{templateUrl:"/app/pages/profile/update.html",reloadOnSearch:!0}),a.when("/dashboard",{templateUrl:"/app/pages/dashboard/view.html",reloadOnSearch:!1}),a.when("/reports/sales",{templateUrl:"/app/pages/reports/sales.html",reloadOnSearch:!1}),a.when("/reports/items",{templateUrl:"/app/pages/reports/items.html",reloadOnSearch:!1}),a.when("/reports/fees",{templateUrl:"/app/pages/reports/fees.html",reloadOnSearch:!1}),a.when("/reports/commissions",{templateUrl:"/app/pages/reports/commissions.html",reloadOnSearch:!1}),a.when("/settings/general",{templateUrl:"/app/pages/settings/general.html",reloadOnSearch:!1}),a.when("/settings/payment",{templateUrl:"/app/pages/settings/payment.html",reloadOnSearch:!1}),a.when("/settings/fulfillment",{templateUrl:"/app/pages/settings/fulfillment.html",reloadOnSearch:!1}),a.when("/settings/analytics",{templateUrl:"/app/pages/settings/analytics.html",reloadOnSearch:!1}),a.when("/settings/technical",{templateUrl:"/app/pages/settings/technical.html",reloadOnSearch:!1}),a.when("/settings/subscriptions",{templateUrl:"/app/pages/settings/subscriptions.html",reloadOnSearch:!1}),a.when("/users",{templateUrl:"/app/pages/users/list.html",reloadOnSearch:!1}),a.when("/users/add",{templateUrl:"/app/pages/users/set.html",reloadOnSearch:!0}),a.when("/users/:id/edit",{templateUrl:"/app/pages/users/set.html",reloadOnSearch:!0}),a.when("/notifications",{templateUrl:"/app/pages/notifications/list.html",reloadOnSearch:!1}),a.when("/notifications/:id",{templateUrl:"/app/pages/notifications/view.html",reloadOnSearch:!0}),a.when("/notifications/:id/preview",{templateUrl:"/app/pages/notifications/preview.html"}),e.interceptors.push(["$q","$rootScope",function(e,a){return{request:function(e){if(e.headers=e.headers||{},1==e.isApi){var a=localStorage.getItem("token");a&&(e.headers.Authorization="Bearer "+a)}return e.headers["Content-Type"]||e.isMultipart||(e.headers["Content-Type"]="application/json"),e},response:function(e){return e},responseError:function(a){return 0!=angular.isObject(a.data)&&a.data.error?403===a.data.error.status?(a.data.error.message="You do not have permission to perform the requested action. Please contact an account administrator for assistance.",e.reject(a)):(401===a.data.error.status&&localStorage.removeItem("token"),e.reject(a)):(a.data={},a.data.error={},a.data.error.message="An unknown error occurred. Please try your request again. If the problem persists, please contact support.",e.reject(a))}}}])}]),app.run(["$rootScope","$route","$templateCache","$location","ApiService","SettingsService","GrowlsService","gettextCatalog","tmhDynamicLocale",function(e,a,t,l,s,r,p,n,o){var i="api.comecero.com";window.location.hostname.indexOf("admin-staging.")>-1&&(i="api-staging.comecero.com"),e.apiHost=i;var h="signin.comecero.com";if(null!=localStorage.getItem("alias")){var h=localStorage.getItem("alias")+".auth.comecero.com";window.location.hostname.indexOf("admin-staging.")>-1&&(h=localStorage.getItem("alias")+".auth-staging.comecero.com")}e.authHost=h;var c="en";null!=localStorage.getItem("language")&&(c=localStorage.getItem("language")),"en"!=c&&(n.loadRemote("/languages/"+c+"/"+c+".json"),n.setCurrentLanguage(c)),o.set(utils.getLocale(c)),r.setUserSettings(),e.$watch("settings.test",function(t,n){t!=n&&(1==t?(e.settings.test=!0,s.set(null,s.buildUrl("/auths/trusted"),{test:!0}).then(function(e){localStorage.setItem("token_live",localStorage.getItem("token")),localStorage.setItem("token",e.token),localStorage.setItem("test",!0),r.setAccountMeta().then(function(){l.search({}),a.reload()})},function(a){e.settings.test=!1,p.addGrowl({id:"switch_test_failure",type:"warning"})})):(e.settings.test=!1,localStorage.setItem("token",localStorage.getItem("token_live")),localStorage.setItem("test",!1),localStorage.removeItem("token_live"),r.setAccountMeta().then(function(){l.search({}),a.reload()})))})}]);